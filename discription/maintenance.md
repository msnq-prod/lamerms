# Обслуживание и штрихкоды

Модуль обслуживания объединяет управление ремонтными заявками, обсуждения и контроль перемещений по штрихкодам.

## Список задач
- Страница `maintenance/index.php` проверяет право `MAINTENANCE_JOBS:VIEW`, поддерживает переключатель «Completed» и хранит номер страницы. Лимит можно изменить через параметр `pageLimit`, что полезно для крупных команд. 【F:src/maintenance/index.php†L4-L25】
- В выборку включаются автор заявки, назначенный исполнитель и текущий статус; сортировка по порядку статусов, приоритету, сроку и дате создания помогает быстро увидеть проблемные задания. 【F:src/maintenance/index.php†L18-L25】

## Карточка задания
- Страница `maintenance/job.php` обслуживает как создание новой заявки, так и просмотр существующей. При отсутствии `id` сразу открывается шаблон создания. 【F:src/maintenance/job.php†L4-L16】
- Для действующей заявки загружается полный список доступных статусов, выделяется текущий, а также подбираются кандидаты на назначение при наличии соответствующих прав. 【F:src/maintenance/job.php†L18-L45】
- Карточка отображает упомянутых пользователей, прикреплённые активы, историю аудита и переписку с возможными файлами, что превращает модуль в полноценный хаб коммуникаций. 【F:src/maintenance/job.php†L47-L102】

## Связь с активами
- В карточке конкретного актива отображаются связанные задания обслуживания с сортировкой по статусу и срокам, а также дерево связанных активов, чтобы оценить влияние неисправности на комплект. 【F:src/asset.php†L86-L133】

## Штрихкоды и логистика
- Страница генерации штрихкодов доступна пользователям с разрешением `ASSETS:ASSET_BARCODES:VIEW` и умеет предварительно подгружать активы целиком или по фильтрам (категория, производитель, тип, конкретный ID). 【F:src/maintenance/barcodeGenerator.php†L4-L68】
- В карточке актива выводятся штрихкоды с последними сканированиями, пользователями и локациями, а также лента из 50 последних сканов для расследования перемещений. 【F:src/asset.php†L134-L177】

## Практические советы
1. Используйте фильтр завершённых задач, чтобы регулярно архивировать решённые обращения и держать очередь чистой. 【F:src/maintenance/index.php†L8-L18】
2. Перед назначением техники проверяйте раздел с упомянутыми пользователями — так можно быстро вовлечь инженеров, уже знакомых с задачей. 【F:src/maintenance/job.php†L47-L61】
3. При потере оборудования сверяйте последние сканирования и связанные задания обслуживания: часто штрихкод фиксирует последнего пользователя или локацию. 【F:src/asset.php†L134-L177】
