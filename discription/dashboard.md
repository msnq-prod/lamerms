# Панель управления

Панель управления AdamRMS служит точкой входа для оперативного анализа. Шаблон [`dashboard.twig`](../src/dashboard.twig) подключает динамические виджеты и календарь, формируя плиточную сетку.

## Виджеты и механика загрузки
- При рендеринге создаётся коллекция `widgets` через `WIDGETS.getAllDashboard()`. Каждый элемент вставляется как Twig-встраивание, поэтому можно добавлять кастомные карточки без изменения основного шаблона. 【F:src/dashboard.twig†L5-L11】
- JavaScript-обработчики статистики подключаются отдельным виджетом `statsWidgetsJS.twig`, что позволяет изолировать код от визуальной части. 【F:src/dashboard.twig†L8-L12】
- Управление списком виджетов происходит на странице «Business Stats», где для авторизованного пользователя создаётся экземпляр `statsWidgets` на основе сохранённого списка ID. 【F:src/instances/stats.php†L4-L10】

## Пустое состояние и навигация
- Если виджеты отсутствуют, блок `noWidgetsBox` показывает подсказку и ссылку на страницу настройки статистики; при наличии карточек контейнер автоматически скрывается. 【F:src/dashboard.twig†L14-L21】
- Сетка `card-columns` адаптирует плитки под ширину экрана, упрощая визуальное сравнение различных метрик.

## Календарь и планирование
- В нижней части панели всегда отображается календарь, подключённый как отдельный виджет `calendar.twig`. Это даёт единое место для обзора будущих доставок и съёмок. 【F:src/dashboard.twig†L22-L27】
- Календарь наследует тот же набор прав доступа, что и список проектов, поэтому видимость расписания автоматически ограничена ролями пользователя.

## Практические рекомендации
1. Настройте список виджетов через `instances/stats.php`, чтобы каждый менеджер видел релевантные карточки (финансы, загрузку склада, заявки на обучение). 【F:src/instances/stats.php†L4-L10】
2. Если требуется временно скрыть все карточки, удалите их в конфигураторе — пустое состояние подскажет, как вернуть нужные панели. 【F:src/dashboard.twig†L14-L21】
3. Используйте календарь для сверки с модулем проектов: любые изменения статуса или дат автоматически отразятся в виджете без повторной настройки. 【F:src/dashboard.twig†L22-L27】
